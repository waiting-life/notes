```js

Object.assign({ ...otherParams }, hotelId ? { hotelId } : {})
const result = (res.data as any).filter((item: any) => {
            return (
              (!roomType || item.roomType.includes(roomType)) &&
              (!createBy || item.createBy === createBy) &&
              (!updateTime ||
                (new Date(item.updateTime.split(' ')[0]).getTime() >=
                  new Date(updateTime[0]).getTime() &&
                  new Date(item.updateTime.split(' ')[0]).getTime() <=
                    new Date(updateTime[1]).getTime()))
            );
          });


let a = undefined
undefined
let b = {name: 'haha'}
undefined
let target = {name: 'hh', ...(a ? { a } : {})}
undefined


// const { hotelId, roomType, createBy, updateTime, ...otherParams } = params;
// const res = await handleTableRequest(
//   { ...otherParams, ...(hotelId ? { hotelId } : {}) },
//   sorter,
//   filter,
//   queryAllPriceAdjust,
// );
// if (!hotelId) return res as any;
// console.log(hotelId);
// const result = ((res.rows as any) || []).filter((item: any) => {
//   return (
//     (!roomType || item.roomType.includes(roomType)) &&
//     (!createBy || item.createBy === createBy) &&
//     (!updateTime ||
//       (new Date(item.updateTime.split(' ')[0]).getTime() >=
//         new Date(updateTime[0]).getTime() &&
//         new Date(item.updateTime.split(' ')[0]).getTime() <=
//           new Date(updateTime[1]).getTime()))
//   );
// });
// console.log(result);
// return {
//   total: result?.length,
//   data: result,
// };
```

```tsx
// 日期计算方法
<p style={{ marginBottom: 0 }}>{`${newDate.getMonth() + 1}/${newDate.getDate()}`}</p>
<p style={{ marginBottom: 0 }}>{names[newDate.getDay()]}</p>
```

``` tsx
// const ooo = [
//   {
//     channelIds: ['1'],
//     roomTypeId: '1427166326679199746',
//     roomTypeName: '海景房',
//     dateList: {
//       '2021-08-19': '1/5',
//       '2021-08-20': '0/5',
//       '2021-08-21': '2/5',
//     },
//     dateList2: [
//       {
//         '2021-08-19': '1/5',
//       },
//       {
//         '2021-08-20': '1/5',
//       },
//       {
//         '2021-08-21': '1/5',
//       },
//     ],
//   },
// ];

// for (let key in dateList) {
//   result[key] = dateList[key]
// }


let dateList = {
  '2021-08-20': '0/5',
  '2021-08-21': '2/5',
  '2021-08-22': '2/5',
  '2021-08-23': '2/5',
  '2021-08-24': '2/5',
  '2021-08-25': '2/5',
  '2021-08-26': '5/5',
  '2021-08-27': '2/5',
};

for (let key in dateList) {
  const value = dateList[key];
  const sum = value.split('/')[0]; // '2'
  result[key] = sum ? (
    <div style={{ border: '1px solid #000' }}>value</div>
  ) : (
    <div style={{ background: '#f4f4f4' }}>value</div>
  );
}


let dateList = {
    '2021-08-20': '0/5',
    '2021-08-21': '2/5',
    '2021-08-22': '2/5',
    '2021-08-23': '2/5',
    '2021-08-24': '2/5',
    '2021-08-25': '2/5',
    '2021-08-26': '5/5',
    '2021-08-27': '2/5',
};
let result = {}
for(let key in dateList) {
    console.log(key)
    const value = dateList[key]
    let soldNum = value.split('/')[0]
    result[key] = soldNum !== '0' ? (
        <div style ={{
            backgroundColor: '#fff', 
            border: '1px solid #000}}',
            width: '40px',
            height: '40px'}}>
            {value}
        </div>
    ) : (
        <div style={{
            backgroundColor: '#f4f4f4'
            width: '40px',
            height: '40px'}}>
            {value}
        </div>
    )
}



for (let key in dateList) {
    const value = dateList[key];
    let soldNum = value.split('/')[0];
    result[key] =
      soldNum !== '0' ? (
        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>
          <div
            style={{
              backgroundColor: '#fff',
              border: '1px solid #ccc',
              width: '40px',
              height: '40px',
              display: 'flex',
              justifyContent: 'center',
              alignItems: 'center',
              boxSizing: 'border-box',
              cursor: 'pointer',
            }}
            onClick={() => {
              const weekFlag = String(new Date(key).getDay());
              const otherParams = {
                key,
                weekFlag: weekFlag === '0' ? '7' : weekFlag,
                roomTypeId,
              };
              modalRef.current?.open(shopId, '', otherParams);
            }}
          >
            {value}
          </div>
        </div>
      ) : (
        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>
          <div
            style={{
              backgroundColor: '#f4f4f4',
              color: '#ccc',
              width: '40px',
              height: '40px',
              textAlign: 'center',
              lineHeight: '40px',
            }}
          >
            {value}
          </div>
        </div>
      );
  }
```

```ts
const arr = ['', '', 1, 2, 3]
arr.filter(id => id)
(3) [1, 2, 3]
```

```ts
type A<T = any> = {
  code: number;
  msg: string;
  data: T;
};

type B<T = any> = {
  a: string;
  b: string;
  rows: T[];
};

type C = {
  couponName: string;
  couponType: number;
};

let res: A<B<C>> = {
  code: 1,
  msg: 'a',
  data: {
    a: 'a',
    b: 'b',
    rows: [
      {
        couponName: 'aaa',
        couponType: 111,
      },
    ],
  },
};

// {
//   code: 200,
//   msg: 'ok',
//   data: {
//     a: 'a',
//     b: 'b',
//     rows: [1, 2, 3, 4, 5]
//   }
// }

```

**图片尺寸校验**

```tsx
 const isSize = (file: any) => {
  return new Promise((resolve, reject) => {
    const url = URL.createObjectURL(file);
    const img = new Image();
    img.src = url;
    img.onload = function () {
      console.log(img.width, img.height, img.width / img.height, 260 / 400);
      if (img.width / img.height === 260 / 400) {
        resolve(true);
      } else {
        reject();
      }
    };
  }).then(
    () => {
      return file;
    },
    () => {
      message.error('只能上传尺寸为260*400的图片');
      return Promise.reject();
    },
  );
};

 <ProFormUploadButton
  listType="picture-card"
  name="file"
  label="活动背景图片"
  max={1}
  action="/api/base-manage/pic/upload"
  rules={[{ required: true, message: '请上传活动背景图片' }]}
  fieldProps={{
    data: { type: 'sys/marketing' },
    method: 'POST',
    headers: {
      Authorization: localStorage.getItem('access_token') || '',
    },
    onChange: (value) => {
      const { file, ...newValues } = formRef.current?.getFieldsValue();
      const imageUrl = file[0]?.response?.data?.path;
      setData({ ...newValues, imageUrl });
    },
    beforeUpload: (file: any) => {
      return isSize(file);
    },
  }}
/>
```

```tsx
<ProForm.Item name="userType">
  <Select
    onClick={(e) => e.preventDefault()}
    onChange={(value) => {
      console.log(value);
    }}
    disabled={flag === 'detail'}
    options={[
      { label: '新用户', value: 0 },
      { label: '老用户', value: 1 },
    ]}
  />
</ProForm.Item>
```

```ts
const arr1 = [
    {id: 1,name: 'cpp', age: 2, amount: 0},
    {id: 2,name: 'cpp', age: 3, amount: 0},
    {id: 3,name: 'cpp', age: 1, amount: 0}, 
    {id: 4,name: 'cpp', age: 2, amount: 0}
]

const arr2 = [
    {id: 1,name: 'cpp', age: 2, amount: 1},       {id: 2,name: 'cpp', age: 3, amount: 2},
 ]
undefined
arr2.forEach(item2 => {
    arr1.forEach(item1 => {
        if(item1.id === item2.id){
            item1.amount = item2.amount 
        } 
    })
})
```

